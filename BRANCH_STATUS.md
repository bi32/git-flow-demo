# Git Flow 分支状态说明

## 为什么develop会领先于main？

这是Git Flow的**正常状态**！让我们看看当前的分支状态：

### 当前分支状态图

```
main分支内容：
●─────[v1.0.0]─────[v1.0.1]
       │             │
       │             └── 包含：基础计算器 + hotfix修复
       └── 包含：基础计算器（加减法）

develop分支内容：
●─────[v1.0.0]─────[乘除法]─────[高级功能]─────[v1.0.1 hotfix]─────►
       │             │              │                │
       │             │              │                └── 同步了hotfix
       │             │              └── 幂运算、历史导出、UI改进
       │             └── 乘法、除法功能
       └── 基础计算器（加减法）
```

### 具体差异

**main分支有的提交：**
1. 初始提交
2. v1.0.0发布（基础计算器）
3. v1.0.1 hotfix（负数显示修复）

**develop分支额外有的提交：**
1. 所有main的内容
2. Bob的乘法功能
3. Alice的除法功能
4. 冲突解决提交
5. Alice的幂运算功能
6. Bob的历史导出功能
7. Charlie的UI改进功能
8. README文档更新

### 这种状态的原因

```
时间线解释：
─────────────────────────────────────────────────────────────►

main:    v1.0.0 ──────────────────── v1.0.1
           ↑                           ↑
           │                           │
           │                           └─ 只合并紧急修复
           └─ 只合并稳定版本发布

develop: v1.0.0 ── 新功能 ── 新功能 ── 新功能 ── v1.0.1 ── 更多新功能
           ↑         ↑         ↑         ↑         ↑
           │         │         │         │         │
           │         │         │         │         └─ 继续开发
           │         │         │         └─ 三人协作功能
           │         │         └─ 除法功能
           │         └─ 乘法功能
           └─ 发布点
```

### Git Flow的核心理念

1. **main分支**：
   - 只包含**生产就绪**的代码
   - 只在发布新版本或紧急修复时更新
   - 代表软件的**稳定版本历史**

2. **develop分支**：
   - 包含**最新的开发进展**
   - 所有新功能先合并到这里
   - 可能包含还未发布的功能

### 实际案例

想象一下真实的软件开发：

```
Chrome浏览器的例子：
- main分支 = Chrome 120（用户正在使用的稳定版）
- develop分支 = Chrome 121 beta（包含新功能，内部测试中）

您的项目现状：
- main = v1.0.1（用户可以下载使用的版本）
- develop = v2.0.0-dev（包含乘除法、高级功能等，准备下次发布）
```

### 查看分支差异的命令

```bash
# 查看develop领先main多少个提交
git rev-list --count main..develop

# 查看develop有哪些main没有的提交
git log main..develop --oneline

# 查看两个分支的详细差异
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit main develop

# 查看文件差异
git diff main..develop --stat
```

### 何时同步？

develop的内容会在下次发布时合并到main：

```bash
# 当准备发布v2.0.0时
git checkout develop
git checkout -b release/2.0.0

# 准备发布（修复bug、更新文档等）
# ...

# 合并到main
git checkout main
git merge --no-ff release/2.0.0
git tag -a v2.0.0 -m "版本 v2.0.0: 乘除法、高级功能、UI改进"

# 这时main就会包含所有develop的功能了
```

### 总结

✅ **这是正常的！**
- develop领先main = 有新功能在开发中
- main落后develop = 生产环境稳定
- 这正是Git Flow要达到的效果：**开发与发布分离**

### 项目当前状态总览

```
分支状态：
┌─────────────────────────────────────────┐
│ main (生产)                              │
│ - ✅ v1.0.0 基础计算器                   │
│ - ✅ v1.0.1 负数显示修复                 │
├─────────────────────────────────────────┤
│ develop (开发)                           │
│ - ✅ v1.0.0 基础计算器                   │
│ - ✅ v1.0.1 负数显示修复                 │
│ - ✅ 乘法功能 (Bob)                      │
│ - ✅ 除法功能 (Alice)                    │
│ - ✅ 幂运算功能 (Alice)                  │
│ - ✅ 历史导出功能 (Bob)                  │
│ - ✅ UI改进 (Charlie)                    │
│ - ✅ 文档更新                            │
└─────────────────────────────────────────┘

下次发布v2.0.0时，main将获得所有这些新功能！
```